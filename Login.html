<!DOCTYPE html>
<html>
  <head>
    
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
  <body class="bg-gray-100">
    <script type="text/javascript" src="jquery-3.7.1.min.js"></script>
    <script src="connectConcept.js"></script>

    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold text-center text-gray-700">Login</h1>
        <form action="/action_page.php" class="flex flex-col space-y-2 mt-4">
            <label for="username" class="font-bold">User Name:</label>
            <input type="text" id="username" name="username" class="p-2 border rounded"><br>
            <label for="password" class="font-bold">Password:</label>
            <input type="text" id="password" name="password" class="p-2 border rounded"><br>
        </form>
        <button onclick="Login()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Log In</button>
        <button onclick="Register()" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Register</button>
        <p id="ConnectionStatus" class="text-gray-700">Connected</p>
        <p id="LoginStatus" class="text-gray-700"></p>
        <button onclick="DisCon()" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded mt-2">Disconnect</button>
    </div>
  </body> 
<script>
  fetch("/Con").then((res)=>{
      return res.json();
    }).then((data)=>{
      document.getElementById('ConnectionStatus').innerHTML = data.val;
    })
  function Register() {
    fetch("/CreateProf", {
      method:"POST",
      headers:{
        'Content-Type': 'application/json'
      },
      body:JSON.stringify({
        username:document.getElementById('username').value,
        password:document.getElementById('password').value
      })
    }).then((res)=>{
      return res.json();
    }).then((data)=>{
      document.getElementById('ConnectionStatus').innerHTML = data.val;
    })
  }
  function Login() {
    fetch("/Login", {
      method:"POST",
      headers:{
        'Content-Type': 'application/json'
      },
      body:JSON.stringify({
        username:document.getElementById('username').value,
        password:document.getElementById('password').value
      })
    }).then((res)=>{
      return res.json();
    }).then((data)=>{
      document.getElementById('LoginStatus').innerHTML = data.val;
      if (data.val === 0) { 
            window.location.href = 'landingPage.html';
        }
    })
  }
  function DisCon() {
    fetch("/DisCon").then((res)=>{
      return res.json();
    }).then((data)=>{
      document.getElementById('ConnectionStatus').innerHTML = data.val;
    })
  }
</script>
</html>